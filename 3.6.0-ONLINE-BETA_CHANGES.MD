# Changelog: v3.6.0-ONLINE-BETA

## ðŸš€ Release Overview
**Version:** 3.6.0-ONLINE-BETA  
**Release Date:** 2026-02-23  
**Focus:** Online Licensing, Hardware Security, and Cloud Integration

This release introduces the **Hardware-Locked Licensing System**, transitioning the AJC PisoWiFi Management System into a secure, online-managed platform. It includes a robust 7-day trial system, Supabase cloud integration for license management, and enhanced security against unauthorized cloning.

---

## ðŸŒŸ New Features

### 1. Hardware-Locked Licensing System
- **Device Fingerprinting**: The system now uniquely identifies hardware (Orange Pi / Raspberry Pi) using CPU serial numbers and MAC addresses.
- **Anti-Cloning**: Licenses are strictly bound to specific hardware IDs. SD card cloning will no longer replicate a valid license status.
- **Supabase Integration**: Real-time license verification against a cloud-based Supabase backend.

### 2. 7-Day Automatic Trial
- **Instant Start**: New installations automatically begin a 7-day fully functional trial period.
- **Trial Dashboard**: Admin interface now displays a countdown of remaining trial days.
- **Expiration Enforcement**: Services are automatically restricted once the trial period ends if no valid license is activated.

### 3. Vendor Management System
- **Vendor Roles**: Support for multiple vendors to manage their own license keys.
- **Row-Level Security (RLS)**: Vendors can securely generate, view, and manage only their own customer licenses.
- **License Generation**: SQL-based tools for vendors to batch-generate secure license keys.

### 4. Admin Interface Updates
- **License Status Card**: New dashboard widget showing Activation Status, Hardware ID, and Trial Days.
- **Online Activation Portal**: Integrated form in "System Settings" for users to input license keys.
- **Visual Indicators**: Color-coded badges (Green/Licensed, Yellow/Trial, Red/Expired) for immediate status awareness.

---

## ðŸ›  Technical Improvements

### Security & Backend
- **Supabase Schema**: Comprehensive SQL migrations for `licenses`, `vendors`, and RLS policies.
- **Offline Resilience**: Local SQLite caching ensures the system continues to operate even if the internet connection drops after activation.
- **Gatekeeper Service**: A new startup check prevents core services from launching if the system is unlicensed and the trial has expired.

### Installation & Setup
- **Updated Installer**: `install.sh` now detects hardware architecture more accurately and prepares the environment for the licensing modules.
- **Dependency Updates**: Added `@supabase/supabase-js` and other core libraries to support the new online features.

---

## ðŸ“‹ Upgrade Notes

### For Existing Users
- **Trial Reset**: Upgrading to this version may trigger the 7-day trial period.
- **Activation Required**: Users will need to obtain a valid license key from their vendor to continue using the system permanently after the trial.

### For Vendors
- **Database Setup**: Requires running the new Supabase migration scripts located in `supabase/migrations/`.
- **Environment Variables**: New `SUPABASE_URL` and `SUPABASE_ANON_KEY` variables must be configured on the device.

---

> **Note**: This is a BETA release. Please report any issues regarding license validation or hardware detection immediately.
